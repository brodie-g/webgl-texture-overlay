<!DOCTYPE html>
<html>
    <head>
        <script src='https://api.tiles.mapbox.com/mapbox-gl-js/v1.0.0/mapbox-gl.js'></script>
        <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v1.0.0/mapbox-gl.css' rel='stylesheet' />
        <script>
        </script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
        <script src="dist/main.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/proj4js/2.3.3/proj4.js"></script>
        <script src="lib/jickle.js"></script>

        <style>
            html,body{
                height: 100%;
                width: 100%;
                overflow: hidden;
                margin: 0;
                padding: 0;
            }
            #map{
                height: 100%;
                width: 100%;
            }
        </style>
        <script>
            $.getJICKLE = function(path, onload){
                var xhr = new XMLHttpRequest();
                xhr.open('GET', path, true);
                xhr.responseType = 'arraybuffer';
                xhr.onload = function(){
                    onload(JICKLE.parse(xhr.response));
                };
                xhr.send();
            }

            $(function(){

                const options = {
                    currentLink: null,
                    activeLT: null,
                    covID: -1,
                    wgsCellSize: 0.2245788210298798,
                    mapOptions: {
                        container: "map",
                        style: "mapbox://styles/mapbox/dark-v9",
                        // { lat: 55.037024, lng: -125.115297 }
                        center: [-125.115297, 55.037024],
                        zoom: 5,
                        maxZoom: 22
                    },
                    panZoom: {
                        100: 12,
                        200: 11,
                        500: 10,
                        1000: 9,
                        2000: 8,
                        5000: 7,
                        10000: 6,
                        25000: 4
                    }
                };

                // Initiate the map instance
                mapboxgl.accessToken =
                    "pk.eyJ1IjoiZGNhaXJucyIsImEiOiJjanF3djl1eHYxYWE1NDNvY3J3OGt6aDZzIn0.u7LSvxuQzDTG6smQ9P3Z_g";
                const map = new mapboxgl.Map(options.mapOptions);

                // Initiate layers on load
                map.on("load", () => {
                    // Add a hillshade
                    map.addSource("dem", {
                        type: "raster-dem",
                        url: "mapbox://mapbox.terrain-rgb"
                    });
                    map.addLayer({
                        id: "hillshading",
                        source: "dem",
                        type: "hillshade"
                    });

                    let nav = new mapboxgl.NavigationControl();
                    map.addControl(nav, "top-left");
                });

            });
        </script>
    </head>
    <body>
	    <div id="map"></div>
    </body>
</html>
